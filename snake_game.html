<!DOCTYPE html>
<html>
<head>
<title>Snake Battle PRO</title>
<style>
body{
    margin:0;
    overflow:hidden;
    font-family:Arial;
    background:#1b5e20;
    display:flex;
    justify-content:center;
    align-items:center;
    height:100vh;
    flex-direction:column;
    color:white;
}

canvas{
    border-radius:15px;
    box-shadow:0 0 40px black;
}

button{
    padding:10px 20px;
    margin:5px;
    border:none;
    border-radius:8px;
    cursor:pointer;
    font-weight:bold;
}

#startScreen{
    position:absolute;
    background:rgba(0,0,0,0.8);
    width:100%;
    height:100%;
    display:flex;
    justify-content:center;
    align-items:center;
    flex-direction:column;
}

#pauseBtn{ background:orange; }
#restartBtn{ background:red; color:white; }
#playBtn{ background:#00c853; font-size:18px; }

#ui{
    margin-top:10px;
}
</style>
</head>
<body>

<div id="startScreen">
    <h1>üêç Snake Battle PRO ‚öîÔ∏è</h1>
    <button id="playBtn">Play Game</button>
</div>

<canvas id="game" width="700" height="500"></canvas>

<div id="ui">
Player: <span id="pScore">0</span> |
CPU: <span id="cpuScore">0</span> |
Time: <span id="timer">60</span>
<br>
<button id="pauseBtn">Pause</button>
<button id="restartBtn">Restart</button>
</div>

<script>
const canvas=document.getElementById("game");
const ctx=canvas.getContext("2d");

const box=20;
const width=700;
const height=500;

let playerSnake,cpuSnake,direction;
let food;
let playerScore=0,cpuScore=0;
let timeLeft=60;
let gameInterval,timerInterval;
let paused=false;
let gameStarted=false;

function initGame(){
    playerSnake=[{x:5*box,y:5*box}];
    cpuSnake=[{x:25*box,y:15*box}];
    direction="RIGHT";
    playerScore=0;
    cpuScore=0;
    timeLeft=60;
    paused=false;

    document.getElementById("pScore").innerText=0;
    document.getElementById("cpuScore").innerText=0;
    document.getElementById("timer").innerText=60;

    spawnFood();

    clearInterval(gameInterval);
    clearInterval(timerInterval);

    gameInterval=setInterval(draw,100);
    timerInterval=setInterval(()=>{
        if(!paused){
            timeLeft--;
            document.getElementById("timer").innerText=timeLeft;
            if(timeLeft<=0) endGame();
        }
    },1000);
}

function spawnFood(){
    food={
        x:Math.floor(Math.random()*(width/box))*box,
        y:Math.floor(Math.random()*(height/box))*box
    };
}

window.addEventListener("keydown",(e)=>{
    if(!gameStarted) return;

    if(["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"," "].includes(e.key))
        e.preventDefault();

    if(e.key==="ArrowLeft"&&direction!=="RIGHT") direction="LEFT";
    if(e.key==="ArrowRight"&&direction!=="LEFT") direction="RIGHT";
    if(e.key==="ArrowUp"&&direction!=="DOWN") direction="UP";
    if(e.key==="ArrowDown"&&direction!=="UP") direction="DOWN";
    if(e.key===" ") togglePause();
});

function togglePause(){
    paused=!paused;
    document.getElementById("pauseBtn").innerText=paused?"Play":"Pause";
}

document.getElementById("pauseBtn").onclick=togglePause;
document.getElementById("restartBtn").onclick=()=>initGame();
document.getElementById("playBtn").onclick=()=>{
    document.getElementById("startScreen").style.display="none";
    gameStarted=true;
    initGame();
};

function moveSnake(snake,dir){
    let x=snake[0].x;
    let y=snake[0].y;
    if(dir==="LEFT") x-=box;
    if(dir==="RIGHT") x+=box;
    if(dir==="UP") y-=box;
    if(dir==="DOWN") y+=box;
    return {x,y};
}

function cpuAI(){
    let head=cpuSnake[0];
    if(food.x>head.x) return "RIGHT";
    if(food.x<head.x) return "LEFT";
    if(food.y>head.y) return "DOWN";
    return "UP";
}

function drawGrass(){
    ctx.fillStyle="#2e7d32";
    ctx.fillRect(0,0,width,height);
    for(let i=0;i<150;i++){
        ctx.fillStyle="#388e3c";
        ctx.fillRect(Math.random()*width,Math.random()*height,2,8);
    }
}

function drawRealSnake(snake,color){
    snake.forEach((s,i)=>{
        ctx.fillStyle=color;
        ctx.beginPath();
        ctx.roundRect(s.x,s.y,box,box,8);
        ctx.fill();

        if(i===0){
            ctx.fillStyle="white";
            ctx.beginPath();
            ctx.arc(s.x+6,s.y+6,3,0,Math.PI*2);
            ctx.arc(s.x+14,s.y+6,3,0,Math.PI*2);
            ctx.fill();
        }
    });
}

function draw(){
    if(paused) return;

    drawGrass();

    let newHead=moveSnake(playerSnake,direction);
    if(newHead.x<0||newHead.y<0||newHead.x>=width||newHead.y>=height){
        endGame();
        return;
    }

    if(newHead.x===food.x&&newHead.y===food.y){
        playerScore++;
        document.getElementById("pScore").innerText=playerScore;
        spawnFood();
    } else playerSnake.pop();

    playerSnake.unshift(newHead);

    let cpuDir=cpuAI();
    let cpuHead=moveSnake(cpuSnake,cpuDir);

    if(cpuHead.x===food.x&&cpuHead.y===food.y){
        cpuScore++;
        document.getElementById("cpuScore").innerText=cpuScore;
        spawnFood();
    } else cpuSnake.pop();

    cpuSnake.unshift(cpuHead);

    drawRealSnake(playerSnake,"#1b5e20");
    drawRealSnake(cpuSnake,"#0d47a1");

    ctx.fillStyle="red";
    ctx.beginPath();
    ctx.arc(food.x+box/2,food.y+box/2,box/2,0,Math.PI*2);
    ctx.fill();
}

function endGame(){
    clearInterval(gameInterval);
    clearInterval(timerInterval);

    let result="Draw!";
    if(playerScore>cpuScore) result="üèÜ You Win!";
    if(cpuScore>playerScore) result="üíÄ CPU Wins!";
    alert(result);
}

</script>
</body>
</html>
